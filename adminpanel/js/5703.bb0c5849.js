"use strict";(globalThis["webpackChunkadmin_panel_vue_webclient"]=globalThis["webpackChunkadmin_panel_vue_webclient"]||[]).push([[5703],{4410:(e,t,s)=>{s.r(t),s.d(t,{default:()=>ue});var a=s(7214),n=s(5885),l=s(8936),o=s(3203),i=s(9835),r=s(1957);const d={class:"q-pa-lg"},p={class:"row q-mb-md"},c={class:"col text-h5"},m={class:"row q-mb-md"},h={class:"col-2 q-my-sm"},u={class:"col-5"},g={class:"row q-mb-md"},C={class:"col-2 q-my-sm"},A={class:"col-5"},I={class:"row q-mb-md"},E={class:"col-2 q-my-sm"},w={class:"col-5"},T={class:"row"},_={class:"col-2 q-my-sm"},N={class:"col-5"},v={class:"q-pt-md text-right"};function R(e,t,s,a,n,l){const o=(0,i.up)("q-input"),R=(0,i.up)("q-card-section"),P=(0,i.up)("q-card"),L=(0,i.up)("q-btn"),S=(0,i.up)("q-linear-progress"),b=(0,i.up)("q-inner-loading"),Z=(0,i.up)("q-scroll-area"),q=(0,i.Q2)("t");return(0,i.wg)(),(0,i.j4)(Z,{class:"full-height full-width"},{default:(0,i.w5)((()=>[(0,i._)("div",d,[(0,i._)("div",p,[(0,i.wy)((0,i._)("div",c,null,512),[[q,"CPANELINTEGRATOR.HEADING_SETTINGS_TAB"]])]),(0,i.Wm)(P,{flat:"",bordered:"",class:"card-edit-settings"},{default:(0,i.w5)((()=>[(0,i.Wm)(R,null,{default:(0,i.w5)((()=>[(0,i._)("div",m,[(0,i.wy)((0,i._)("div",h,null,512),[[q,"CPANELINTEGRATOR.LABEL_CPANEL_HOST"]]),(0,i._)("div",u,[(0,i.Wm)(o,{outlined:"",dense:"","bg-color":"white",modelValue:n.cpanelHost,"onUpdate:modelValue":t[0]||(t[0]=e=>n.cpanelHost=e),onKeyup:(0,r.D2)(l.save,["enter"])},null,8,["modelValue","onKeyup"])])]),(0,i._)("div",g,[(0,i.wy)((0,i._)("div",C,null,512),[[q,"CPANELINTEGRATOR.LABEL_CPANEL_PORT"]]),(0,i._)("div",A,[(0,i.Wm)(o,{outlined:"",dense:"","bg-color":"white",modelValue:n.cpanelPort,"onUpdate:modelValue":t[1]||(t[1]=e=>n.cpanelPort=e),onKeyup:(0,r.D2)(l.save,["enter"])},null,8,["modelValue","onKeyup"])])]),(0,i._)("div",I,[(0,i.wy)((0,i._)("div",E,null,512),[[q,"CPANELINTEGRATOR.LABEL_CPANEL_USER"]]),(0,i._)("div",w,[(0,i.Wm)(o,{outlined:"",dense:"","bg-color":"white",modelValue:n.cpanelUser,"onUpdate:modelValue":t[2]||(t[2]=e=>n.cpanelUser=e),onKeyup:(0,r.D2)(l.save,["enter"])},null,8,["modelValue","onKeyup"])])]),(0,i._)("div",T,[(0,i.wy)((0,i._)("div",_,null,512),[[q,"CPANELINTEGRATOR.LABEL_CPANEL_PASS"]]),(0,i._)("div",N,[(0,i.Wm)(o,{outlined:"",dense:"","bg-color":"white",type:"password",autocomplete:"new-password",modelValue:n.password,"onUpdate:modelValue":t[3]||(t[3]=e=>n.password=e),onKeyup:(0,r.D2)(l.save,["enter"])},null,8,["modelValue","onKeyup"])])])])),_:1})])),_:1}),(0,i._)("div",v,[(0,i.Wm)(L,{unelevated:"","no-caps":"",dense:"",class:"q-px-sm",ripple:!1,color:"primary",onClick:l.save,label:e.$t("COREWEBCLIENT.ACTION_SAVE")},null,8,["onClick","label"])])]),(0,i.Wm)(b,{style:{"justify-content":"flex-start"},showing:n.loading||n.saving},{default:(0,i.w5)((()=>[(0,i.Wm)(S,{query:""})])),_:1},8,["showing"])])),_:1})}var P=s(9336),L=s(1427),S=s(4089),b=s(2456);const Z="     ",q={name:"CpanelAdminSettingsPerTenant",data(){return{saving:!1,loading:!1,cpanelHost:"",cpanelPort:"",cpanelUser:"",cpanelHasPassword:!1,password:Z,savedPass:Z}},computed:{tenantId(){return this.$store.getters["tenants/getCurrentTenantId"]}},watch:{"$store.state.tenants.tenants":{handler:function(){this.populate()},deep:!0}},beforeRouteLeave(e,t,s){this.$root.doBeforeRouteLeave(e,t,s)},mounted(){this.loading=!1,this.saving=!1,this.populate()},methods:{hasChanges(){if(this.loading)return!1;const e=S.Z.pObject(this.tenant?.completeData),t=e["CpanelIntegrator::CpanelPort"];return this.cpanelHost!==e["CpanelIntegrator::CpanelHost"]||S.Z.pInt(this.cpanelPort)!==t||this.cpanelUser!==e["CpanelIntegrator::CpanelUser"]||this.password!==this.savedPass},revertChanges(){const e=S.Z.pObject(this.tenant?.completeData);this.cpanelHost=e["CpanelIntegrator::CpanelHost"],this.cpanelPort=e["CpanelIntegrator::CpanelPort"],this.cpanelUser=e["CpanelIntegrator::CpanelUser"],this.password=this.savedPass},populate(){const e=this.$store.getters["tenants/getTenant"](this.tenantId);e&&(void 0!==e.completeData["CpanelIntegrator::CpanelHost"]?(this.tenant=e,this.cpanelHost=e.completeData["CpanelIntegrator::CpanelHost"],this.cpanelPort=e.completeData["CpanelIntegrator::CpanelPort"],this.cpanelUser=e.completeData["CpanelIntegrator::CpanelUser"],this.cpanelHasPassword=e.completeData["CpanelIntegrator::CpanelHasPassword"]):this.getSettings())},save(){if(!this.saving){this.saving=!0;const e={CpanelHost:this.cpanelHost,CpanelPort:S.Z.pInt(this.cpanelPort),CpanelUser:this.cpanelUser,TenantId:this.tenantId};this.password!==Z&&(e.CpanelPassword=this.password),b.Z.sendRequest({moduleName:"CpanelIntegrator",methodName:"UpdateSettings",parameters:e}).then((t=>{if(this.saving=!1,!0===t){this.savedPass=this.password;const t={"CpanelIntegrator::CpanelHost":e.CpanelHost,"CpanelIntegrator::CpanelPort":e.CpanelPort,"CpanelIntegrator::CpanelUser":e.CpanelUser,"CpanelIntegrator::CpanelHasPassword":""!==this.password};this.$store.commit("tenants/setTenantCompleteData",{id:this.tenantId,data:t}),L.Z.showReport(this.$t("COREWEBCLIENT.REPORT_SETTINGS_UPDATE_SUCCESS"))}else L.Z.showError(this.$t("COREWEBCLIENT.ERROR_SAVING_SETTINGS_FAILED"))}),(e=>{this.saving=!1,L.Z.showError(P.Z.getTextFromResponse(e,this.$t("COREWEBCLIENT.ERROR_SAVING_SETTINGS_FAILED")))}))}},getSettings(){this.loading=!0;const e={TenantId:this.tenantId};b.Z.sendRequest({moduleName:"CpanelIntegrator",methodName:"GetSettings",parameters:e}).then((e=>{if(this.loading=!1,e){const t={"CpanelIntegrator::CpanelHost":S.Z.pString(e.CpanelHost),"CpanelIntegrator::CpanelPort":S.Z.pInt(e.CpanelPort),"CpanelIntegrator::CpanelUser":S.Z.pString(e.CpanelUser),"CpanelIntegrator::CpanelHasPassword":S.Z.pBool(e.CpanelHasPassword)};this.$store.commit("tenants/setTenantCompleteData",{id:this.tenantId,data:t})}}),(e=>{L.Z.showError(P.Z.getTextFromResponse(e))}))}}};var D=s(1639),y=s(6663),U=s(4458),f=s(3190),H=s(6611),O=s(8879),B=s(854),G=s(8289),W=s(9984),V=s.n(W);const $=(0,D.Z)(q,[["render",R]]),x=$;V()(q,"components",{QScrollArea:y.Z,QCard:U.Z,QCardSection:f.Z,QInput:H.Z,QBtn:O.Z,QInnerLoading:B.Z,QLinearProgress:G.Z});var Q=s(6970);const k=e=>((0,i.dD)("data-v-50329738"),e=e(),(0,i.Cn)(),e),F={class:"q-pa-lg"},K={class:"row q-mb-md"},j={class:"col text-h5"},M={class:"row q-mb-md"},z={class:"col-2 q-mt-sm"},Y={class:"col-3"},J=k((()=>(0,i._)("div",{class:"q-ml-sm q-mr-xs"},[(0,i._)("span",{class:"text-h6"},[(0,i._)("b",null,"@")])],-1))),X={class:"col-3 q-mt-xs q-ml-md"},ee={class:"row q-mb-md"},te=k((()=>(0,i._)("div",{class:"col-2"},null,-1))),se={class:"col-5"},ae=["value"],ne={class:"col-3 q-mt-xs q-ml-md",style:{position:"relative"}},le={style:{position:"absolute",bottom:"3px"}};function oe(e,t,s,a,n,l){const o=(0,i.up)("q-input"),d=(0,i.up)("q-select"),p=(0,i.up)("q-btn"),c=(0,i.up)("q-card-section"),m=(0,i.up)("q-card"),h=(0,i.up)("q-linear-progress"),u=(0,i.up)("q-inner-loading"),g=(0,i.up)("q-scroll-area"),C=(0,i.Q2)("t");return(0,i.wg)(),(0,i.j4)(g,{class:"full-height full-width"},{default:(0,i.w5)((()=>[(0,i._)("div",F,[(0,i._)("div",K,[(0,i.wy)((0,i._)("div",j,null,512),[[C,"CPANELINTEGRATOR.HEADING_SETTINGS_TAB_ALIASES"]])]),(0,i.Wm)(m,{flat:"",bordered:"",class:"card-edit-settings"},{default:(0,i.w5)((()=>[(0,i.Wm)(c,null,{default:(0,i.w5)((()=>[(0,i._)("div",M,[(0,i.wy)((0,i._)("div",z,null,512),[[C,"CPANELINTEGRATOR.LABEL_ALIAS"]]),(0,i._)("div",Y,[(0,i.Wm)(o,{outlined:"",dense:"","bg-color":"white",modelValue:n.aliasName,"onUpdate:modelValue":t[0]||(t[0]=e=>n.aliasName=e)},null,8,["modelValue"])]),J,(0,i._)("div",null,[(0,i.Wm)(d,{outlined:"",dense:"","bg-color":"white",class:"domains-select",modelValue:n.selectedDomain,"onUpdate:modelValue":t[1]||(t[1]=e=>n.selectedDomain=e),options:l.domains,"option-label":"name"},null,8,["modelValue","options"])]),(0,i._)("div",X,[(0,i.Wm)(p,{unelevated:"","no-caps":"","no-wrap":"",dense:"",class:"q-ml-md q-px-sm",disable:!n.aliasName.length,ripple:!1,color:"primary",label:e.$t("CPANELINTEGRATOR.ACTION_ADD_NEW_ALIAS"),onClick:l.addNewAlias},null,8,["disable","label","onClick"])])]),(0,i._)("div",ee,[te,(0,i._)("div",se,[(0,i.wy)((0,i._)("select",{size:"9",class:"select",multiple:"","onUpdate:modelValue":t[2]||(t[2]=e=>n.selectedAliases=e)},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.aliasesList,(e=>((0,i.wg)(),(0,i.iD)("option",{key:e,value:e},(0,Q.zw)(e),9,ae)))),128))],512),[[r.bM,n.selectedAliases]])]),(0,i._)("div",ne,[(0,i._)("div",le,[(0,i.Wm)(p,{unelevated:"","no-caps":"","no-wrap":"",dense:"",class:"q-ml-md q-px-sm",ripple:!1,color:"primary",label:e.$t("CPANELINTEGRATOR.ACTION_DELETE_ALIASES"),onClick:l.deleteAliasesList},null,8,["label","onClick"])])])])])),_:1})])),_:1})]),(0,i.Wm)(u,{style:{"justify-content":"flex-start"},showing:n.loading||n.saving||n.deleting},{default:(0,i.w5)((()=>[(0,i.Wm)(h,{query:""})])),_:1},8,["showing"])])),_:1})}var ie=s(4409),re=s.n(ie);const de={name:"CpanelAliasesAdminSettingsPerUser",data(){return{loading:!1,saving:!1,deleting:!1,aliasName:"",selectedDomain:null,selectedAliases:[],aliasesList:[],user:null}},computed:{currentTenantId(){return this.$store.getters["tenants/getCurrentTenantId"]},domains(){const e=this.$store.getters["maildomains/getDomains"];return S.Z.pArray(e[this.currentTenantId])}},watch:{domains(){this.domains.length>0&&(this.selectedDomain=this.domains[0])}},beforeRouteLeave(e,t,s){this.$root.doBeforeRouteLeave(e,t,s)},mounted(){this.requestDomains(),this.parseRoute(),null===this.selectedDomain&&this.domains.length>0&&(this.selectedDomain=this.domains[0])},methods:{hasChanges(){return""!==this.aliasName},revertChanges(){this.aliasName=""},requestDomains(){this.$store.dispatch("maildomains/requestDomainsIfNecessary",{tenantId:this.currentTenantId})},parseRoute(){const e=S.Z.pPositiveInt(this.$route?.params?.id);this.user?.id!==e&&(this.user={id:e},this.populate())},populate(){this.getSettings()},addNewAlias(){if(!this.saving){this.saving=!0;const e={UserId:this.user?.id,AliasName:this.aliasName,AliasDomain:this.selectedDomain?.name,TenantId:this.currentTenantId};b.Z.sendRequest({moduleName:"CpanelIntegrator",methodName:"AddNewAlias",parameters:e}).then((e=>{this.saving=!1,!0===e?(this.aliasName="",this.populate()):L.Z.showError(this.$t("COREWEBCLIENT.ERROR_DATA_TRANSFER_FAILED"))}),(e=>{this.saving=!1,L.Z.showError(P.Z.getTextFromResponse(e,this.$t("COREWEBCLIENT.ERROR_DATA_TRANSFER_FAILED")))}))}},deleteAliasesList(){if(!this.deleting)if(this.deleting=!0,this.selectedAliases.length){const e={UserId:this.user?.id,Aliases:this.selectedAliases,TenantId:this.tenantId};b.Z.sendRequest({moduleName:"CpanelIntegrator",methodName:"DeleteAlias",parameters:e}).then((e=>{this.deleting=!1,!0===e&&this.populate()}),(e=>{this.deleting=!1,L.Z.showError(P.Z.getTextFromResponse(e))}))}else this.deleting=!1,L.Z.showError(this.$t("CPANELINTEGRATOR.ERROR_EMPTY_ALIASES"))},getSettings(){this.loading=!0;const e={UserId:this.user?.id,TenantId:this.currentTenantId};b.Z.sendRequest({moduleName:"CpanelIntegrator",methodName:"GetAliases",parameters:e}).then((e=>{this.loading=!1,re().isArray(e.Aliases)&&(this.aliasesList=e.Aliases)}),(e=>{this.loading=!1,L.Z.showError(P.Z.getTextFromResponse(e))}))}}};var pe=s(8401);const ce=(0,D.Z)(de,[["render",oe],["__scopeId","data-v-50329738"]]),me=ce;V()(de,"components",{QScrollArea:y.Z,QCard:U.Z,QCardSection:f.Z,QInput:H.Z,QSelect:pe.Z,QBtn:O.Z,QInnerLoading:B.Z,QLinearProgress:G.Z});const he=({moduleName:e,methodName:t,parameters:s})=>{"Core"===e&&"DeleteUsers"===t&&(s.DeletionConfirmedByAdmin=!0)},ue={moduleName:"CpanelIntegrator",requiredModules:[],init(e){n.Z.init(e)},initSubscriptions(e){o.Z.$off("webApi::Request",he),o.Z.$on("webApi::Request",he)},getAdminSystemTabs(){return[{tabName:"cpanel",tabTitle:"CPANELINTEGRATOR.ADMIN_SETTINGS_TAB_LABEL",tabRouteChildren:[{path:"cpanel",component:()=>s.e(847).then(s.bind(s,847))}]}]},getAdminTenantTabs(){return[{tabName:"cpanel",tabTitle:"CPANELINTEGRATOR.ADMIN_SETTINGS_TAB_LABEL",tabRouteChildren:[{path:"id/:id/cpanel",component:x},{path:"search/:search/id/:id/cpanel",component:x},{path:"page/:page/id/:id/cpanel",component:x},{path:"search/:search/page/:page/id/:id/cpanel",component:x}]}]},getAdminUserTabs(){const e=l["default"].getters["user/isUserSuperAdmin"];return a.Z.isModuleAvailable("MailDomains")&&e?[{tabName:"cpanel-aliases",tabTitle:"CPANELINTEGRATOR.LABEL_SETTINGS_TAB_ALIASES",tabRouteChildren:[{path:"id/:id/cpanel-aliases",component:me},{path:"search/:search/id/:id/cpanel-aliases",component:me},{path:"page/:page/id/:id/cpanel-aliases",component:me},{path:"search/:search/page/:page/id/:id/cpanel-aliases",component:me}]}]:[]}}},5885:(e,t,s)=>{s.d(t,{Z:()=>r});var a=s(4409),n=s.n(a),l=s(4089);class o{constructor(e){const t=l.Z.pObject(e.CpanelIntegrator);n().isEmpty(t)||(this.allowAliases=l.Z.pBool(t.AllowAliases),this.allowCreateDeleteAccountOnCpanel=l.Z.pBool(t.AllowCreateDeleteAccountOnCpanel),this.cpanelHasPassword=l.Z.pBool(t.CpanelHasPassword),this.cpanelHost=l.Z.pString(t.CpanelHost),this.panelPort=l.Z.pString(t.CpanelPort),this.panelUser=l.Z.pString(t.CpanelUser))}saveCpanelSettings({cpanelHasPassword:e,cpanelHost:t,panelPort:s,panelUser:a}){this.cpanelHasPassword=e,this.cpanelHost=t,this.panelPort=s,this.panelUser=a}}let i=null;const r={init(e){i=new o(e)},saveCpanelSettings(e){i.saveCpanelSettings(e)},getCpanelSettings(){return{allowAliases:i.allowAliases,allowCreateDeleteAccountOnCpanel:i.allowCreateDeleteAccountOnCpanel,cpanelHasPassword:i.cpanelHasPassword,cpanelHost:i.cpanelHost,panelPort:i.panelPort,panelUser:i.panelUser}}}}}]);