"use strict";(globalThis["webpackChunkadmin_panel_vue_webclient"]=globalThis["webpackChunkadmin_panel_vue_webclient"]||[]).push([[8364],{8364:(e,t,s)=>{s.r(t),s.d(t,{default:()=>f});var n=s(8776),r=s(8936),i=s(9835),a=s(6970);const o={class:"q-pa-lg"},l={class:"row q-mb-md"},u={class:"col text-h5"},c={class:"row"},d={class:"q-pt-md text-right"};function h(e,t,s,n,r,h){const v=(0,i.up)("q-item-label"),p=(0,i.up)("q-checkbox"),S=(0,i.up)("q-card-section"),E=(0,i.up)("q-card"),b=(0,i.up)("q-btn"),g=(0,i.up)("q-linear-progress"),m=(0,i.up)("q-inner-loading"),A=(0,i.up)("q-scroll-area"),T=(0,i.Q2)("t");return(0,i.wg)(),(0,i.j4)(A,{class:"full-height full-width"},{default:(0,i.w5)((()=>[(0,i._)("div",o,[(0,i._)("div",l,[(0,i._)("div",u,(0,a.zw)(e.$t("ACTIVESERVER.HEADING_SETTINGS_TAB")),1)]),(0,i.Wm)(E,{flat:"",bordered:"",class:"card-edit-settings"},{default:(0,i.w5)((()=>[(0,i.Wm)(S,null,{default:(0,i.w5)((()=>[(0,i._)("div",c,[(0,i.Wm)(p,{dense:"",modelValue:r.enableActiveSync,"onUpdate:modelValue":t[0]||(t[0]=e=>r.enableActiveSync=e)},{default:(0,i.w5)((()=>[(0,i.wy)((0,i.Wm)(v,null,null,512),[[T,"ACTIVESERVER.LABEL_ENABLE_ACTIVESYNC"]])])),_:1},8,["modelValue"])])])),_:1})])),_:1}),(0,i._)("div",d,[(0,i.Wm)(b,{unelevated:"","no-caps":"",dense:"",class:"q-px-sm",ripple:!1,color:"primary",label:e.$t("COREWEBCLIENT.ACTION_SAVE"),onClick:h.updateSettingsForEntity},null,8,["label","onClick"])])]),(0,i.Wm)(m,{style:{"justify-content":"flex-start"},showing:r.loading||r.saving},{default:(0,i.w5)((()=>[(0,i.Wm)(g,{query:""})])),_:1},8,["showing"])])),_:1})}var v=s(4409),p=s.n(v),S=s(9336),E=s(1427),b=s(4089),g=s(2456),m=s(9706);const A={name:"ActiveSyncAdminSettingsPerUser",data(){return{saving:!1,loading:!1,enableActiveSync:!1}},watch:{$route(e,t){this.parseRoute()}},mounted(){this.parseRoute()},beforeRouteLeave(e,t,s){this.$root.doBeforeRouteLeave(e,t,s)},methods:{getEnableActiveSyncFromUser(){const e=b.Z.pObject(this.user?.completeData);return b.Z.pBool(e["ActiveServer::Enabled"])},hasChanges(){const e=this.getEnableActiveSyncFromUser();return this.enableActiveSync!==e},revertChanges(){this.enableActiveSync=this.getEnableActiveSyncFromUser()},parseRoute(){const e=b.Z.pPositiveInt(this.$route?.params?.id);this.user?.id!==e&&(this.user={id:e},this.populate())},populate(){this.loading=!0;const e=this.$store.getters["tenants/getCurrentTenantId"];m.Z.getUser(e,this.user.id).then((({user:e,userId:t})=>{t===this.user.id&&(this.loading=!1,e&&p().isFunction(e?.getData)?(this.user=e,this.enableActiveSync=this.getEnableActiveSyncFromUser()):this.$emit("no-user-found"))}))},updateSettingsForEntity(){if(!this.saving){this.saving=!0;const e={UserId:this.user?.id,TenantId:this.user.tenantId,EnableModule:b.Z.pBool(this.enableActiveSync)};g.Z.sendRequest({moduleName:"ActiveServer",methodName:"UpdatePerUserSettings",parameters:e}).then((t=>{this.saving=!1,t?(m.Z.getUser(e.TenantId,this.user?.id).then((({user:e})=>{e.updateData([{field:"ActiveServer::Enabled",value:b.Z.pBool(this.enableActiveSync)}]),this.populate()})),E.Z.showReport(this.$t("COREWEBCLIENT.REPORT_SETTINGS_UPDATE_SUCCESS"))):E.Z.showError(this.$t("COREWEBCLIENT.ERROR_SAVING_SETTINGS_FAILED"))}),(e=>{this.saving=!1,E.Z.showError(S.Z.getTextFromResponse(e,this.$t("COREWEBCLIENT.ERROR_SAVING_SETTINGS_FAILED")))}))}}}};var T=s(1639),C=s(6663),_=s(4458),I=s(3190),Z=s(6937),U=s(3115),R=s(8879),w=s(854),N=s(8289),F=s(9984),y=s.n(F);const L=(0,T.Z)(A,[["render",h]]),B=L;y()(A,"components",{QScrollArea:C.Z,QCard:_.Z,QCardSection:I.Z,QCheckbox:Z.Z,QItemLabel:U.Z,QBtn:R.Z,QInnerLoading:w.Z,QLinearProgress:N.Z});const f={moduleName:"ActiveServer",requiredModules:[],init(e){n.Z.init(e)},getAdminSystemTabs(){return[{tabName:"activeserver",tabTitle:"ACTIVESERVER.LABEL_SETTINGS_TAB",tabRouteChildren:[{path:"activeserver",component:()=>Promise.all([s.e(4736),s.e(3942)]).then(s.bind(s,3942))}]}]},getAdminUserTabs(){const e=r["default"].getters["user/isUserSuperAdmin"];return e?[{tabName:"activeserver",tabTitle:"ACTIVESERVER.LABEL_SETTINGS_TAB",tabRouteChildren:[{path:"id/:id/activeserver",component:B},{path:"search/:search/id/:id/activeserver",component:B},{path:"page/:page/id/:id/activeserver",component:B},{path:"search/:search/page/:page/id/:id/activeserver",component:B}]}]:[]}}},8776:(e,t,s)=>{s.d(t,{Z:()=>l});var n=s(4409),r=s.n(n),i=s(4089);class a{constructor(e){const t=i.Z.pObject(e.ActiveServer);r().isEmpty(t)||(this.enableModule=i.Z.pBool(t.EnableModule),this.enableModuleForUser=i.Z.pBool(t.EnableModuleForUser),this.enableForNewUsers=i.Z.pBool(t.EnableForNewUsers),this.usersCount=i.Z.pInt(t.UsersCount),this.licensedUsersCount=i.Z.pInt(t.LicensedUsersCount),this.usersFreeSlots=i.Z.pInt(t.UsersFreeSlots),this.server=i.Z.pString(t.Server),this.linkToManual=i.Z.pString(t.LinkToManual))}saveActiveServerSettings({enableModule:e,enableForNewUsers:t,server:s,linkToManual:n}){this.enableModule=e,this.enableForNewUsers=t,this.server=s,this.linkToManual=n}}let o=null;const l={init(e){o=new a(e)},saveActiveServerSettings(e){o.saveActiveServerSettings(e)},getActiveServerSettings(){return{enableModule:o.enableModule,enableModuleForUser:o.enableModuleForUser,enableForNewUsers:o.enableForNewUsers,usersCount:o.usersCount,licensedUsersCount:o.licensedUsersCount,usersFreeSlots:o.usersFreeSlots,server:o.server,linkToManual:o.linkToManual}}}}}]);